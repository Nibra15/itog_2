Билет 1: Структура HTTP-запроса и её
роль в маршрутизации
1. Методы запроса
Методы HTTP определяют тип операции, которую клиент хочет выполнить над ресурсом:
– GET: Получение данных.
– POST: Создание нового ресурса.
– PUT: Обновление существующего ресурса.
– DELETE: Удаление ресурса.
– PATCH: Частичное обновление ресурса.
Методы запроса могут использоваться балансировщиками нагрузки для маршрутизации
трафика. Например, можно настроить правила, направляющие GET-запросы на один
сервер, а POST-запросы — на другой.
2. Request URI и Query String
– Request URI: Указывает путь к ресурсу, например, /api/users.
– Query String: Содержит параметры запроса, например, ?id=123&sort=asc.
Балансировщики могут использовать URI и параметры запроса для маршрутизации.
Например, запросы к /api/admin могут направляться на отдельный сервер,
обслуживающий административный интерфейс.
3. Заголовки пакета
Заголовки содержат метаинформацию о запросе:
– Content-Type: Тип содержимого тела запроса.
– Authorization: Данные для аутентификации.
– User-Agent: Информация о клиентском приложении.
Балансировщики могут использовать заголовки для маршрутизации. Например, можно
настроить правила, направляющие запросы с определённым User-Agent на
специфические серверы. Для балансировки могут использоваться заголовки пакета (не
предусмотренные стандартом заголовки начинаются с `X-`. Например, X-My-Key).
Недостаток такой балансировки - если балансировщик строго следует протоколу HTTP, то
нужно обязательно соблюдать нейминг с `X-***`. Самая первая строка HTTP является
служебной, там передаётся тип запроса, эндпоинт (куда мы отправляем запрос) и
протокол передачи с версией. Внутри передаваемого TCP/UDP пакета имеется полезная
нагрузка, данные, внутри которых могут использоваться другие пакеты (например HTTPпакет).
4. Тело запроса
Тело запроса содержит данные, отправляемые на сервер, особенно в POST и PUT
запросах.
Балансировщики обычно не анализируют тело запроса из-за затратности этой операции.
Однако в некоторых случаях, например, при использовании API Gateway, возможна
маршрутизация на основе содержимого тела запроса.
5. Использование компонентов запроса для
маршрутизации
Балансировщики нагрузки и API Gateway могут использовать различные компоненты
HTTP-запроса для принятия решений о маршрутизации:
– Метод запроса: Например, направлять GET-запросы на кэширующие серверы.
– URI и Query String: Маршрутизация на основе пути и параметров запроса.
Заголовки: Использование заголовков для определения целевого сервера.
Чтобы передать картинку при помощи HTTP, необходимо передать её в формат Base64.
Base64 - формат данных для передачи, использующий только символы ASCII.
